# üõ†Ô∏è Workout Tracker API

API RESTful para el seguimiento de entrenamientos y ejercicios.  
Desarrollada en **Node.js** con **Express**.

---

## ‚úÖ Soluci√≥n al Error en `users.routes.js`

El problema se generaba porque exist√≠an **dos rutas GET duplicadas en `/`**, lo que hac√≠a que Express siempre ejecutara la primera (que devolv√≠a todos los usuarios) e ignorara la segunda (que conten√≠a la l√≥gica de filtrado).  

Adem√°s, en el filtro de b√∫squeda se estaba utilizando el campo `name`, cuando en el modelo de usuario realmente se usa `nombre`.  

üîß **Soluci√≥n:**  
Se unificaron ambas rutas en **una sola**, que admite tanto el listado completo como filtros din√°micos (`role` y `search`).  
De esta forma:
- Si no se env√≠an par√°metros ‚Üí retorna todos los usuarios.  
- Si se incluyen filtros ‚Üí aplica la b√∫squeda correctamente.  

Esto elimina duplicaciones, asegura consistencia y mejora el mantenimiento de la API. üöÄ  

---

## üìä Tabla de Endpoints

### üë• M√≥dulo: Users (`/api/v1/users`)

| M√©todo | Endpoint | Descripci√≥n | Status Codes |
|--------|----------|-------------|--------------|
| `GET` | `/users` | Listar todos los usuarios | `200`, `400` |
| `GET` | `/users/:id` | Obtener usuario por ID | `200`, `404` |
| `POST` | `/users` | Crear nuevo usuario | `201`, `400` |
| `PUT` | `/users/:id` | Actualizar usuario | `200`, `400`, `404` |
| `DELETE` | `/users/:id` | Eliminar usuario | `200`, `404` |

### üèãÔ∏è M√≥dulo: Ejercicios (`/api/v1/ejercicios`)

| M√©todo | Endpoint | Descripci√≥n | Status Codes |
|--------|----------|-------------|--------------|
| `GET` | `/ejercicios` | Listar ejercicios | `200`, `400` |
| `GET` | `/ejercicios/:id` | Obtener ejercicio por ID | `200`, `404` |
| `POST` | `/ejercicios` | Crear nuevo ejercicio | `201`, `400` |
| `PUT` | `/ejercicios/:id` | Actualizar ejercicio | `200`, `400`, `404` |
| `DELETE` | `/ejercicios/:id` | Eliminar ejercicio | `200`, `404` |

### üìÖ M√≥dulo: Plan Entrenamiento (`/api/v1/plan-entrenamiento`)

| M√©todo | Endpoint | Descripci√≥n | Status Codes |
|--------|----------|-------------|--------------|
| `GET` | `/plan-entrenamiento` | Listar planes | `200`, `400` |
| `GET` | `/plan-entrenamiento/:id` | Obtener plan por ID | `200`, `404` |
| `POST` | `/plan-entrenamiento` | Crear nuevo plan | `201`, `400` |
| `PUT` | `/plan-entrenamiento/:id` | Actualizar plan | `200`, `400`, `404` |
| `DELETE` | `/plan-entrenamiento/:id` | Eliminar plan | `200`, `404` |

### üéØ M√≥dulo: Elemento Plan (`/api/v1/elemento-plan`)

| M√©todo | Endpoint | Descripci√≥n | Status Codes |
|--------|----------|-------------|--------------|
| `GET` | `/elemento-plan` | Listar elementos | `200`, `400` |
| `GET` | `/elemento-plan/:id` | Obtener elemento por ID | `200`, `404` |
| `POST` | `/elemento-plan` | Crear nuevo elemento | `201`, `400` |
| `PUT` | `/elemento-plan/:id` | Actualizar elemento | `200`, `400`, `404` |
| `DELETE` | `/elemento-plan/:id` | Eliminar elemento | `200`, `404` |

### üóìÔ∏è M√≥dulo: Sesi√≥n Programada (`/api/v1/sesion-programada`)

| M√©todo | Endpoint | Descripci√≥n | Status Codes |
|--------|----------|-------------|--------------|
| `GET` | `/sesion-programada` | Listar sesiones | `200`, `400` |
| `GET` | `/sesion-programada/:id` | Obtener sesi√≥n por ID | `200`, `404` |
| `POST` | `/sesion-programada` | Crear nueva sesi√≥n | `201`, `400` |
| `PUT` | `/sesion-programada/:id` | Actualizar sesi√≥n | `200`, `400`, `404` |
| `DELETE` | `/sesion-programada/:id` | Eliminar sesi√≥n | `200`, `404` |

### üìù M√≥dulo: Registro Entrenamiento (`/api/v1/registro-entrenamiento`)

| M√©todo | Endpoint | Descripci√≥n | Status Codes |
|--------|----------|-------------|--------------|
| `GET` | `/registro-entrenamiento` | Listar registros | `200`, `400` |
| `GET` | `/registro-entrenamiento/:id` | Obtener registro por ID | `200`, `404` |
| `POST` | `/registro-entrenamiento` | Crear nuevo registro | `201`, `400` |
| `PUT` | `/registro-entrenamiento/:id` | Actualizar registro | `200`, `400`, `404` |
| `DELETE` | `/registro-entrenamiento/:id` | Eliminar registro | `200`, `404` |

### üìä M√≥dulo: Reportes (`/api/v1/reportes`)

| M√©todo | Endpoint | Descripci√≥n | Status Codes |
|--------|----------|-------------|--------------|
| `GET` | `/reportes` | Listar reportes | `200`, `400` |
| `GET` | `/reportes/:id` | Obtener reporte por ID | `200`, `404` |
| `POST` | `/reportes` | Crear nuevo reporte | `201`, `400` |
| `PUT` | `/reportes/:id` | Actualizar reporte | `200`, `400`, `404` |
| `DELETE` | `/reportes/:id` | Eliminar reporte | `200`, `404` |

---

## üì® Ejemplos de Request/Response

### üë§ **USERS - Crear Usuario**

**Request:**

POST /api/v1/users
Content-Type: application/json

{
  "nombre": "Stiven",
  "email": "stiven@email.com",
  "contrase√±a_hash": "123seg",
  "estatura_cm": 165,
  "peso_kg": 58,
  "fecha_nacimiento": "2008-24-02",
  "role": "user"
}
Response: 201 Created

json
{
  "id": "1737225600000",
  "nombre": "stiven",
  "email": "stiven.garcia@email.com",
  "contrase√±a_hash": "123Sseg",
  "fecha_creacion": "2025-01-18T10:45:00.000Z",
  "fecha_actualizacion": "2025-01-18T10:45:00.000Z",
  "estatura_cm": 165,
  "peso_kg": 58,
  "fecha_nacimiento": "2008-24-02",
  "role": "user",
  "createdAt": "2025-01-18T10:45:00.000Z"
}

üèãÔ∏è EJERCICIOS - Crear Ejercicio
Request:
POST /api/v1/ejercicios
Content-Type: application/json

{
  "nombre": "Press de banca",
  "descripcion": "Ejercicio para desarrollo de pectorales",
  "categor√≠a": "fuerza",
  "grupo_muscular": "pecho",
  "nivel_dificultad": "intermedio",
  "equipo_necesario": "banco plano y barra"
}
Response: 201 Created

json
{
  "id": "1737225600001",
  "nombre": "Press de banca",
  "descripcion": "Ejercicio para desarrollo de pectorales",
  "categor√≠a": "fuerza",
  "grupo_muscular": "pecho",
  "nivel_dificultad": "intermedio",
  "equipo_necesario": "banco plano y barra",
  "fecha_creacion": "2025-01-18T10:46:00.000Z",
  "fecha_actualizacion": "2025-01-18T10:46:00.000Z"
}

üìÖ PLAN ENTRENAMIENTO - Crear Plan
Request:
POST /api/v1/plan-entrenamiento
Content-Type: application/json

{
  "id_usuario": "1737225600000",
  "titulo": "Plan Hipertrofia Avanzado",
  "descripcion": "Programa de 8 semanas para ganancia muscular",
  "activo": true,
  "nivel_dificultad": "avanzado",
  "total_semanas": 8,
  "dias_por_semana": 5
}
Response: 201 Created

json
{
  "id_plan": "1737225600002",
  "id_usuario": "1737225600000",
  "titulo": "Plan Hipertrofia Avanzado",
  "descripcion": "Programa de 8 semanas para ganancia muscular",
  "activo": true,
  "nivel_dificultad": "avanzado",
  "total_semanas": 8,
  "dias_por_semana": 5,
  "fecha_creacion": "2025-01-18T10:47:00.000Z",
  "fecha_actualizacion": "2025-01-18T10:47:00.000Z"
}

üéØ ELEMENTO PLAN - Crear Elemento
Request:
POST /api/v1/elemento-plan
Content-Type: application/json

{
  "id_plan": "1737225600002",
  "id_ejercicio": "1737225600001",
  "series": 4,
  "repeticiones": 10,
  "peso_kg": 80,
  "descanso_segundos": 90,
  "orden": 1
}
Response: 201 Created

json
{
  "id_item": "1737225600003",
  "id_plan": "1737225600002",
  "id_ejercicio": "1737225600001",
  "series": 4,
  "repeticiones": 10,
  "peso_kg": 80,
  "descanso_segundos": 90,
  "orden": 1,
  "fecha_creacion": "2025-01-18T10:48:00.000Z",
  "fecha_actualizacion": "2025-01-18T10:48:00.000Z"
}

üóìÔ∏è SESI√ìN PROGRAMADA - Crear Sesi√≥n
Request:
POST /api/v1/sesion-programada
Content-Type: application/json

{
  "id_usuario": "1737225600000",
  "id_plan": "1737225600002",
  "fecha_hora_programada": "2025-01-20T08:30:00",
  "duracion_minutos": 75,
  "estado": "pendiente",
  "ubicacion": "Gimnasio Central",
  "notas": "Llevar cintur√≥n de levantamiento"
}
Response: 201 Created

json
{
  "id_sesion": "1737225600004",
  "id_usuario": "1737225600000",
  "id_plan": "1737225600002",
  "fecha_hora_programada": "2025-01-20T08:30:00",
  "duracion_minutos": 75,
  "estado": "pendiente",
  "ubicacion": "Gimnasio Central",
  "notas": "Llevar cintur√≥n de levantamiento",
  "fecha_creacion": "2025-01-18T10:49:00.000Z",
  "fecha_actualizacion": "2025-01-18T10:49:00.000Z"
}

üìù REGISTRO ENTRENAMIENTO - Crear Registro
Request:
POST /api/v1/registro-entrenamiento
Content-Type: application/json

{
  "id_usuario": "1737225600000",
  "id_sesion": "1737225600004",
  "fecha_ejecucion": "2025-01-20T08:45:00",
  "items_registrados": [
    {
      "id_ejercicio": "1737225600001",
      "series_realizadas": 4,
      "repeticiones_totales": 40,
      "peso_usado": 80
    }
  ],
  "duracion_total": 70,
  "calorias_quemadas": 520,
  "valoracion": 5
}
Response: 201 Created

json
{
  "id_registro": "1737225600005",
  "id_usuario": "1737225600000",
  "id_sesion": "1737225600004",
  "fecha_ejecucion": "2025-01-20T08:45:00",
  "items_registrados": [
    {
      "id_ejercicio": "1737225600001",
      "series_realizadas": 4,
      "repeticiones_totales": 40,
      "peso_usado": 80
    }
  ],
  "duracion_total": 70,
  "calorias_quemadas": 520,
  "valoracion": 5,
  "fecha_creacion": "2025-01-18T10:50:00.000Z",
  "fecha_actualizacion": "2025-01-18T10:50:00.000Z"
}

üìä REPORTES - Crear Reporte
Request:
POST /api/v1/reportes
Content-Type: application/json

{
  "id_usuario": "1737225600000",
  "tipo_reporte": "mensual",
  "fecha_inicio": "2025-01-01",
  "fecha_fin": "2025-01-31",
  "metricas": {
    "sesiones_completadas": 15,
    "peso_total_levantado_kg": 12500,
    "calorias_quemadas": 7800
  },
  "conclusiones": "Incremento del 10% en fuerza de tren inferior. Se recomienda aumentar carga en sentadillas."
}
Response: 201 Created

json
{
  "id_reporte": "1737225600006",
  "id_usuario": "1737225600000",
  "tipo_reporte": "mensual",
  "fecha_inicio": "2025-01-01",
  "fecha_fin": "2025-01-31",
  "metricas": {
    "sesiones_completadas": 15,
    "peso_total_levantado_kg": 12500,
    "calorias_quemadas": 7800
  },
  "conclusiones": "Incremento del 10% en fuerza de tren inferior. Se recomienda aumentar carga en sentadillas.",
  "fecha_creacion": "2025-01-18T10:51:00.000Z",
  "fecha_actualizacion": "2025-01-18T10:51:00.000Z"
}

‚ö° Ejemplos de Filtros
üîç Filtrar Usuarios por Rol
GET /api/v1/users?role=admin

üîç Buscar Ejercicios por Grupo Muscular
GET /api/v1/ejercicios?grupo_muscular=piernas&nivel_dificultad=intermedio

üîç Filtrar Sesiones por Estado
GET /api/v1/sesion-programada?estado=completada&id_usuario=1737225600000

üîç Buscar en M√∫ltiples Campos
GET /api/v1/ejercicios?search=press&categoria=fuerza

üìã C√≥digos de Estado HTTP
C√≥digo	Descripci√≥n	Casos de Uso
200	OK	Operaci√≥n exitosa (GET, PUT, DELETE)
201	Created	Recurso creado exitosamente (POST)
400	Bad Request	Datos inv√°lidos o faltantes
404	Not Found	Recurso no encontrado
500	Internal Server Error	Error interno del servidor

## üèóÔ∏è Estructura del Proyecto

```bash
src/
‚îú‚îÄ‚îÄ controllers/                # L√≥gica de negocio
‚îÇ   ‚îú‚îÄ‚îÄ users.controller.js
‚îÇ   ‚îú‚îÄ‚îÄ ejercicios.controller.js
‚îÇ   ‚îú‚îÄ‚îÄ planEntrenamiento.controller.js
‚îÇ   ‚îú‚îÄ‚îÄ elementoPlan.controller.js
‚îÇ   ‚îú‚îÄ‚îÄ sesionProgramada.controller.js
‚îÇ   ‚îú‚îÄ‚îÄ registroEntrenamiento.controller.js
‚îÇ   ‚îî‚îÄ‚îÄ reporte.controller.js
‚îú‚îÄ‚îÄ routes/                     # Definici√≥n de rutas
‚îÇ   ‚îî‚îÄ‚îÄ v1/
‚îÇ       ‚îú‚îÄ‚îÄ index.js
‚îÇ       ‚îú‚îÄ‚îÄ users.routes.js
‚îÇ       ‚îú‚îÄ‚îÄ ejercicios.routes.js
‚îÇ       ‚îú‚îÄ‚îÄ planEntrenamiento.routes.js
‚îÇ       ‚îú‚îÄ‚îÄ elementoPlan.routes.js
‚îÇ       ‚îú‚îÄ‚îÄ sesionProgramada.routes.js
‚îÇ       ‚îú‚îÄ‚îÄ registroEntrenamiento.routes.js
‚îÇ       ‚îî‚îÄ‚îÄ reporte.routes.js
‚îî‚îÄ‚îÄ app.js                      # Servidor principal

```bash

üìã M√≥dulos Implementados
1. Users (/api/v1/users)
Gesti√≥n de usuarios del sistema.

GET / ‚Üí Listar usuarios (filtros: role, search)

GET /:id ‚Üí Obtener usuario por ID

POST / ‚Üí Crear usuario

PUT /:id ‚Üí Actualizar usuario

DELETE /:id ‚Üí Eliminar usuario

Campos principales: id, nombre, email, role, estatura, peso, fecha_nacimiento

2. Ejercicios (/api/v1/ejercicios)
Cat√°logo de ejercicios disponibles.

GET / ‚Üí Listar ejercicios (filtros: categoria, grupo_muscular, nivel_dificultad, search)

GET /:id ‚Üí Obtener ejercicio por ID

POST / ‚Üí Crear ejercicio

PUT /:id ‚Üí Actualizar ejercicio

DELETE /:id ‚Üí Eliminar ejercicio

Campos principales: id, nombre, descripcion, categor√≠a, grupo_muscular, nivel_dificultad, equipo_necesario

3. Plan Entrenamiento (/api/v1/plan-entrenamiento)
Planes de entrenamiento personalizados.
(... y as√≠ sucesivamente con el resto de m√≥dulos, igual que lo ten√≠as, pero con formato m√°s limpio).

üîÑ M√©todos Comunes en Controladores
getAll[Entidad] ‚Üí Listar con filtros opcionales

get[Entidad]ById ‚Üí Obtener por ID

create[Entidad] ‚Üí Crear registro

update[Entidad] ‚Üí Actualizar registro

delete[Entidad] ‚Üí Eliminar registro

üåü Caracter√≠sticas Comunes
‚úîÔ∏è Validaciones de campos requeridos
‚úîÔ∏è Filtros de b√∫squeda por query params
‚úîÔ∏è Manejo de errores con status HTTP claros (400, 404, 201, 200)
‚úîÔ∏è Generaci√≥n autom√°tica de campos (id, fecha_creacion, fecha_actualizacion)

üöÄ Instalaci√≥n y Uso

# Instalar dependencias
npm install

# Ejecutar en desarrollo
npm run dev
 
Acceder a la API en:
üëâ http://localhost:8000/api/v1/
 

üîÑ Flujo de Datos
üë§ Usuario se registra en el sistema

üìù Crea/Selecciona un Plan de Entrenamiento

üèãÔ∏è El plan contiene elementos (ejercicios espec√≠ficos)

üìÖ Programa sesiones de entrenamiento

‚úÖ Ejecuta y registra entrenamientos

üìä Genera reportes de progreso